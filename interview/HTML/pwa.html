<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWA</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="assets/css/index.css">
</head>

<body>
    <!-- 
    PWA是什么?
    PWA 指的是使用指定技术和标准模式来开发的 Web 应用，这同时赋予它们 Web 应用和原生应用的特性。
    功能:
    离线工作、可安装、易于同步、可以发送推送通知等
    优势:
    1. PWA相比于安装应用，访问一个网站显然更加容易和迅速。你还可以通过链接来分享 Web 应用。
    2. 原生应用与操作系统可以更加完美的整合，也因此为用户提供了无缝的用户体验。
    你可以通过安装应用使得它在离线的状态下也可以运行；相较于使用浏览器访问，
    用户也更喜欢通过点击主页上的图标来访问它们喜爱的应用。

    * 减少应用安装后的加载时间，通过 Service Workers 来进行缓存，以此来节省带宽和时间。
    * 当应用有可用的更新时，可以只更新发生改变的那部分内容。相比之下，对于一个原生应用而言，即便是最微小的改动也需要强制用户去再次下载整个应用。
    * 外观和使用感受与原生平台更加融为一体——应用图标被放置在主屏幕上，应用可以全屏运行等。
    * 凭借系统通知和推送消息与用户保持连接，对用户产生更多的吸引力，并且提高转换效率。

    比较有名的PWA网站就是 stackblitz.com

    manifest
    Web 应用程序清单在一个 JSON 文本文件中提供有关应用程序的信息（如名称，作者，图标和描述）。
    manifest 的目的是将 Web 应用程序安装到设备的主屏幕，为用户提供更快的访问和更丰富的体验。
    background_color: 为 web 应用程序预定义的背景颜色(在样式表加载之前的过渡背景颜色)。
    description: 提供有关 Web 应用程序的一般描述。
    dir和lang: 指定名称、短名称和描述成员的主文本方向。与 lang 一起配置，可以帮助正确显示右到左文本。 
    display: 定义开发人员对 Web 应用程序的首选显示模式。
    icons: 指定可在各种环境中用作应用程序图标的图像对象数组。 
    name: 应用程序名称。
    short_name: 应用程序简短易读的名称。
    start_url: 指定用户从设备启动应用程序时加载的 URL。
    theme_color: 定义应用程序的默认主题颜色。 这有时会影响操作系统显示应用程序的方式（例如，在 Android 的任务切换器上，主题颜色包围应用程序）。

    Service Workers
    Service Worker 是浏览器和网络之间的虚拟代理。解决了如何正确缓存网站资源并使其在离线时可用的问题。
    提供离线功能，可以处理通知、在单独的线程上执行繁重的计算等事务，可以控制网络请求、修改网络请求、返回缓存的自定义响应，或者合成响应。

    首先需要注册一个service worker，注册完成后，sw.js 文件会自动下载、安装，然后激活。

    如何让网站变成PWA?
    简单来说就是manifest + Service Workers方式。

    如何更新PWA?
    只需修改缓存名字的版本号即可。当执行这个函数的时候，浏览器如果发现这个url的文件内容有修改（和之前已经注册的sw比较），则会重新安装新版本。

    -->
    <div id="app"></div>
    <script src="assets/js/main.js"></script>
    <script>
        window.addEventListener("online",  function(){
            console.log("You are online!");
        });
        window.addEventListener("offline", function(){
            console.log("Oh no, you lost your network connection.");
        });
    </script>
</body>

</html>